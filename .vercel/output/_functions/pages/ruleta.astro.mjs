/* empty css                                        */
import { e as createComponent, r as renderTemplate, n as defineScriptVars, k as renderComponent, m as maybeRenderHead, h as addAttribute } from '../chunks/astro/server_Ctxpu_nC.mjs';
import 'piccolore';
import { $ as $$Layout } from '../chunks/Layout_nzRoMys9.mjs';
import { d as db } from '../chunks/index_Bw9JdCU_.mjs';
/* empty css                                  */
export { renderers } from '../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Ruleta = createComponent(async ($$result, $$props, $$slots) => {
  const players = await db.users.findAll();
  return renderTemplate(_a || (_a = __template(["", " <script>(function(){", "\n  const checkboxes = document.querySelectorAll('.player-checkbox');\n  const selectedCountEl = document.getElementById('selectedCount');\n  const wheel = document.getElementById('wheel');\n  const wheelContent = document.getElementById('wheelContent');\n  const spinBtn = document.getElementById('spinBtn');\n  const resultDisplay = document.getElementById('resultDisplay');\n  const player1Name = document.getElementById('player1Name');\n  const player2Name = document.getElementById('player2Name');\n  const matchHistory = document.getElementById('matchHistory');\n  const clearHistoryBtn = document.getElementById('clearHistoryBtn');\n  const spinAgainBtn = document.getElementById('spinAgainBtn');\n  const instructionMsg = document.getElementById('instructionMsg');\n\n  let selectedPlayers = [];\n  let currentRotation = 0;\n  let isSpinning = false;\n  let generatedMatches = [];\n  let remainingPlayers = [];\n\n  // Colors for wheel segments\n  const segmentColors = [\n    '#8B4513', '#A0522D', '#CD853F', '#D2691E',\n    '#B8860B', '#DAA520', '#8B6914', '#996515'\n  ];\n\n  function updateWheel() {\n    if (selectedPlayers.length < 2) {\n      wheelContent.innerHTML = '';\n      instructionMsg?.classList.remove('hidden');\n      return;\n    }\n\n    instructionMsg?.classList.add('hidden');\n\n    const count = selectedPlayers.length;\n    const anglePerSegment = 360 / count;\n\n    // Create conic gradient\n    let gradientStops = [];\n    selectedPlayers.forEach((p, i) => {\n      const color = segmentColors[i % segmentColors.length];\n      const start = (i * anglePerSegment);\n      const end = ((i + 1) * anglePerSegment);\n      gradientStops.push(`${color} ${start}deg ${end}deg`);\n    });\n\n    wheel.style.background = `conic-gradient(from 0deg, ${gradientStops.join(', ')})`;\n\n    // Create segment labels\n    let labelsHtml = '';\n    selectedPlayers.forEach((p, i) => {\n      const angle = (i * anglePerSegment) + (anglePerSegment / 2) - 90;\n      labelsHtml += `\n        <div class=\"absolute text-amber-100 font-cinzel text-xs md:text-sm font-bold whitespace-nowrap\"\n             style=\"top: 50%; left: 50%; transform: rotate(${angle}deg) translateX(60px); transform-origin: 0 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\">\n          ${p.name.substring(0, 8)}\n        </div>\n      `;\n    });\n    wheelContent.innerHTML = labelsHtml;\n  }\n\n  function getSelectedPlayers() {\n    return Array.from(checkboxes)\n      .filter(cb => cb.checked)\n      .map(cb => ({\n        id: parseInt(cb.value),\n        name: cb.dataset.name\n      }));\n  }\n\n  function updateSelectedCount() {\n    selectedPlayers = getSelectedPlayers();\n    selectedCountEl.textContent = `${selectedPlayers.length} jugadores seleccionados`;\n    spinBtn.disabled = selectedPlayers.length < 2;\n    updateWheel();\n\n    // Reset remaining players when selection changes\n    remainingPlayers = [...selectedPlayers];\n  }\n\n  function spin() {\n    if (isSpinning || remainingPlayers.length < 2) return;\n\n    isSpinning = true;\n    spinBtn.disabled = true;\n    spinAgainBtn.disabled = true;\n    resultDisplay.classList.add('hidden');\n\n    // Random rotation (minimum 5 full rotations + random angle)\n    const extraRotation = 1800 + Math.random() * 1800;\n    currentRotation += extraRotation;\n    wheel.style.transform = `rotate(${currentRotation}deg)`;\n\n    // After spin completes\n    setTimeout(() => {\n      // Select 2 random players from remaining\n      const shuffled = [...remainingPlayers].sort(() => Math.random() - 0.5);\n      const p1 = shuffled[0];\n      const p2 = shuffled[1];\n\n      // Remove selected players from remaining\n      remainingPlayers = remainingPlayers.filter(p => p.id !== p1.id && p.id !== p2.id);\n\n      // Show result\n      player1Name.textContent = p1.name;\n      player2Name.textContent = p2.name;\n      resultDisplay.classList.remove('hidden');\n\n      // Add to history\n      generatedMatches.push({ player1: p1, player2: p2 });\n      updateMatchHistory();\n\n      isSpinning = false;\n      spinAgainBtn.disabled = remainingPlayers.length < 2;\n      spinBtn.disabled = remainingPlayers.length < 2;\n      clearHistoryBtn.disabled = false;\n    }, 5000);\n  }\n\n  function updateMatchHistory() {\n    if (generatedMatches.length === 0) {\n      matchHistory.innerHTML = `\n        <p class=\"text-aoe-cream-dark text-center py-4\">\n          Los enfrentamientos generados aparecer\xE1n aqu\xED\n        </p>\n      `;\n      return;\n    }\n\n    let html = '';\n    generatedMatches.forEach((match, i) => {\n      html += `\n        <div class=\"flex items-center justify-between p-3 bg-aoe-dark/50 rounded border border-aoe-gold/20\">\n          <span class=\"text-aoe-cream-dark text-sm\">Duelo ${i + 1}</span>\n          <div class=\"flex items-center gap-3\">\n            <span class=\"text-green-400 font-cinzel\">${match.player1.name}</span>\n            <span class=\"text-aoe-gold text-sm\">vs</span>\n            <span class=\"text-red-400 font-cinzel\">${match.player2.name}</span>\n          </div>\n        </div>\n      `;\n    });\n\n    if (remainingPlayers.length === 1) {\n      html += `\n        <div class=\"mt-4 p-3 bg-aoe-gold/10 rounded border border-aoe-gold/30 text-center\">\n          <span class=\"text-aoe-gold font-cinzel\">${remainingPlayers[0].name}</span>\n          <span class=\"text-aoe-cream-dark text-sm ml-2\">queda sin oponente</span>\n        </div>\n      `;\n    } else if (remainingPlayers.length === 0 && generatedMatches.length > 0) {\n      html += `\n        <div class=\"mt-4 p-3 bg-green-900/20 rounded border border-green-500/30 text-center\">\n          <span class=\"text-green-400\">Todos los enfrentamientos han sido asignados</span>\n        </div>\n      `;\n    }\n\n    matchHistory.innerHTML = html;\n  }\n\n  function clearHistory() {\n    generatedMatches = [];\n    remainingPlayers = [...selectedPlayers];\n    updateMatchHistory();\n    resultDisplay.classList.add('hidden');\n    spinBtn.disabled = selectedPlayers.length < 2;\n    spinAgainBtn.disabled = true;\n    clearHistoryBtn.disabled = true;\n  }\n\n  // Event listeners\n  checkboxes.forEach(cb => {\n    cb.addEventListener('change', updateSelectedCount);\n  });\n\n  spinBtn?.addEventListener('click', spin);\n  spinAgainBtn?.addEventListener('click', spin);\n  clearHistoryBtn?.addEventListener('click', clearHistory);\n\n  // Initial setup\n  updateSelectedCount();\n})();<\/script> "], ["", " <script>(function(){", "\n  const checkboxes = document.querySelectorAll('.player-checkbox');\n  const selectedCountEl = document.getElementById('selectedCount');\n  const wheel = document.getElementById('wheel');\n  const wheelContent = document.getElementById('wheelContent');\n  const spinBtn = document.getElementById('spinBtn');\n  const resultDisplay = document.getElementById('resultDisplay');\n  const player1Name = document.getElementById('player1Name');\n  const player2Name = document.getElementById('player2Name');\n  const matchHistory = document.getElementById('matchHistory');\n  const clearHistoryBtn = document.getElementById('clearHistoryBtn');\n  const spinAgainBtn = document.getElementById('spinAgainBtn');\n  const instructionMsg = document.getElementById('instructionMsg');\n\n  let selectedPlayers = [];\n  let currentRotation = 0;\n  let isSpinning = false;\n  let generatedMatches = [];\n  let remainingPlayers = [];\n\n  // Colors for wheel segments\n  const segmentColors = [\n    '#8B4513', '#A0522D', '#CD853F', '#D2691E',\n    '#B8860B', '#DAA520', '#8B6914', '#996515'\n  ];\n\n  function updateWheel() {\n    if (selectedPlayers.length < 2) {\n      wheelContent.innerHTML = '';\n      instructionMsg?.classList.remove('hidden');\n      return;\n    }\n\n    instructionMsg?.classList.add('hidden');\n\n    const count = selectedPlayers.length;\n    const anglePerSegment = 360 / count;\n\n    // Create conic gradient\n    let gradientStops = [];\n    selectedPlayers.forEach((p, i) => {\n      const color = segmentColors[i % segmentColors.length];\n      const start = (i * anglePerSegment);\n      const end = ((i + 1) * anglePerSegment);\n      gradientStops.push(\\`\\${color} \\${start}deg \\${end}deg\\`);\n    });\n\n    wheel.style.background = \\`conic-gradient(from 0deg, \\${gradientStops.join(', ')})\\`;\n\n    // Create segment labels\n    let labelsHtml = '';\n    selectedPlayers.forEach((p, i) => {\n      const angle = (i * anglePerSegment) + (anglePerSegment / 2) - 90;\n      labelsHtml += \\`\n        <div class=\"absolute text-amber-100 font-cinzel text-xs md:text-sm font-bold whitespace-nowrap\"\n             style=\"top: 50%; left: 50%; transform: rotate(\\${angle}deg) translateX(60px); transform-origin: 0 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\">\n          \\${p.name.substring(0, 8)}\n        </div>\n      \\`;\n    });\n    wheelContent.innerHTML = labelsHtml;\n  }\n\n  function getSelectedPlayers() {\n    return Array.from(checkboxes)\n      .filter(cb => cb.checked)\n      .map(cb => ({\n        id: parseInt(cb.value),\n        name: cb.dataset.name\n      }));\n  }\n\n  function updateSelectedCount() {\n    selectedPlayers = getSelectedPlayers();\n    selectedCountEl.textContent = \\`\\${selectedPlayers.length} jugadores seleccionados\\`;\n    spinBtn.disabled = selectedPlayers.length < 2;\n    updateWheel();\n\n    // Reset remaining players when selection changes\n    remainingPlayers = [...selectedPlayers];\n  }\n\n  function spin() {\n    if (isSpinning || remainingPlayers.length < 2) return;\n\n    isSpinning = true;\n    spinBtn.disabled = true;\n    spinAgainBtn.disabled = true;\n    resultDisplay.classList.add('hidden');\n\n    // Random rotation (minimum 5 full rotations + random angle)\n    const extraRotation = 1800 + Math.random() * 1800;\n    currentRotation += extraRotation;\n    wheel.style.transform = \\`rotate(\\${currentRotation}deg)\\`;\n\n    // After spin completes\n    setTimeout(() => {\n      // Select 2 random players from remaining\n      const shuffled = [...remainingPlayers].sort(() => Math.random() - 0.5);\n      const p1 = shuffled[0];\n      const p2 = shuffled[1];\n\n      // Remove selected players from remaining\n      remainingPlayers = remainingPlayers.filter(p => p.id !== p1.id && p.id !== p2.id);\n\n      // Show result\n      player1Name.textContent = p1.name;\n      player2Name.textContent = p2.name;\n      resultDisplay.classList.remove('hidden');\n\n      // Add to history\n      generatedMatches.push({ player1: p1, player2: p2 });\n      updateMatchHistory();\n\n      isSpinning = false;\n      spinAgainBtn.disabled = remainingPlayers.length < 2;\n      spinBtn.disabled = remainingPlayers.length < 2;\n      clearHistoryBtn.disabled = false;\n    }, 5000);\n  }\n\n  function updateMatchHistory() {\n    if (generatedMatches.length === 0) {\n      matchHistory.innerHTML = \\`\n        <p class=\"text-aoe-cream-dark text-center py-4\">\n          Los enfrentamientos generados aparecer\xE1n aqu\xED\n        </p>\n      \\`;\n      return;\n    }\n\n    let html = '';\n    generatedMatches.forEach((match, i) => {\n      html += \\`\n        <div class=\"flex items-center justify-between p-3 bg-aoe-dark/50 rounded border border-aoe-gold/20\">\n          <span class=\"text-aoe-cream-dark text-sm\">Duelo \\${i + 1}</span>\n          <div class=\"flex items-center gap-3\">\n            <span class=\"text-green-400 font-cinzel\">\\${match.player1.name}</span>\n            <span class=\"text-aoe-gold text-sm\">vs</span>\n            <span class=\"text-red-400 font-cinzel\">\\${match.player2.name}</span>\n          </div>\n        </div>\n      \\`;\n    });\n\n    if (remainingPlayers.length === 1) {\n      html += \\`\n        <div class=\"mt-4 p-3 bg-aoe-gold/10 rounded border border-aoe-gold/30 text-center\">\n          <span class=\"text-aoe-gold font-cinzel\">\\${remainingPlayers[0].name}</span>\n          <span class=\"text-aoe-cream-dark text-sm ml-2\">queda sin oponente</span>\n        </div>\n      \\`;\n    } else if (remainingPlayers.length === 0 && generatedMatches.length > 0) {\n      html += \\`\n        <div class=\"mt-4 p-3 bg-green-900/20 rounded border border-green-500/30 text-center\">\n          <span class=\"text-green-400\">Todos los enfrentamientos han sido asignados</span>\n        </div>\n      \\`;\n    }\n\n    matchHistory.innerHTML = html;\n  }\n\n  function clearHistory() {\n    generatedMatches = [];\n    remainingPlayers = [...selectedPlayers];\n    updateMatchHistory();\n    resultDisplay.classList.add('hidden');\n    spinBtn.disabled = selectedPlayers.length < 2;\n    spinAgainBtn.disabled = true;\n    clearHistoryBtn.disabled = true;\n  }\n\n  // Event listeners\n  checkboxes.forEach(cb => {\n    cb.addEventListener('change', updateSelectedCount);\n  });\n\n  spinBtn?.addEventListener('click', spin);\n  spinAgainBtn?.addEventListener('click', spin);\n  clearHistoryBtn?.addEventListener('click', clearHistory);\n\n  // Initial setup\n  updateSelectedCount();\n})();<\/script> "])), renderComponent($$result, "Layout", $$Layout, { "title": "Ruleta de Enfrentamientos", "data-astro-cid-nw2kwzey": true }, { "default": async ($$result2) => renderTemplate` ${maybeRenderHead()}<div class="max-w-4xl mx-auto space-y-8" data-astro-cid-nw2kwzey> <div class="text-center" data-astro-cid-nw2kwzey> <h1 class="aoe-title text-3xl mb-2" data-astro-cid-nw2kwzey>Ruleta de Enfrentamientos</h1> <p class="text-aoe-cream-dark" data-astro-cid-nw2kwzey>Selecciona jugadores y deja que el destino decida los duelos</p> </div> ${players.length < 2 ? renderTemplate`<div class="aoe-panel text-center py-8" data-astro-cid-nw2kwzey> <span class="text-5xl mb-4 block" data-astro-cid-nw2kwzey>⚠️</span> <h2 class="aoe-title text-xl mb-2" data-astro-cid-nw2kwzey>Jugadores insuficientes</h2> <p class="text-aoe-cream-dark mb-4" data-astro-cid-nw2kwzey>
Necesitas al menos 2 jugadores para usar la ruleta.
</p> <a href="/players" class="aoe-btn-primary inline-block" data-astro-cid-nw2kwzey>
Agregar Jugadores
</a> </div>` : renderTemplate`<div class="space-y-8" data-astro-cid-nw2kwzey> <!-- Player Selection --> <div class="aoe-panel" data-astro-cid-nw2kwzey> <h2 class="aoe-title text-xl mb-4" data-astro-cid-nw2kwzey>Selecciona los Jugadores</h2> <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="playerSelection" data-astro-cid-nw2kwzey> ${players.map((p) => renderTemplate`<label class="cursor-pointer group" data-astro-cid-nw2kwzey> <input type="checkbox"${addAttribute(p.id, "value")}${addAttribute(p.username, "data-name")} class="peer hidden player-checkbox" data-astro-cid-nw2kwzey> <div class="player-card aoe-card text-center border-2 border-aoe-gold/30 peer-checked:border-aoe-gold peer-checked:bg-gradient-to-br peer-checked:from-aoe-gold/30 peer-checked:to-amber-900/40 peer-checked:shadow-[0_0_20px_rgba(218,165,32,0.6)] transition-all py-3" data-astro-cid-nw2kwzey> <span class="player-name text-sm block" data-astro-cid-nw2kwzey>${p.username}</span> <span class="check-indicator hidden text-green-400 text-lg mt-1" data-astro-cid-nw2kwzey>✓</span> </div> </label>`)} </div> <p class="text-aoe-cream-dark text-sm mt-3 text-center" id="selectedCount" data-astro-cid-nw2kwzey>
0 jugadores seleccionados
</p> </div> <!-- Wheel Container --> <div class="aoe-panel" data-astro-cid-nw2kwzey> <div class="relative flex flex-col items-center" data-astro-cid-nw2kwzey> <!-- Pointer --> <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 z-20" data-astro-cid-nw2kwzey> <div class="w-0 h-0 border-l-[20px] border-r-[20px] border-t-[30px] border-l-transparent border-r-transparent border-t-aoe-gold drop-shadow-lg" data-astro-cid-nw2kwzey></div> </div> <!-- Wheel --> <div class="relative w-80 h-80 md:w-96 md:h-96" data-astro-cid-nw2kwzey> <!-- Wooden wheel base --> <div class="absolute inset-0 rounded-full bg-gradient-to-br from-amber-800 via-amber-700 to-amber-900 shadow-2xl border-8 border-amber-950" style="box-shadow: inset 0 0 30px rgba(0,0,0,0.5), 0 10px 30px rgba(0,0,0,0.5);" data-astro-cid-nw2kwzey> <!-- Wood grain texture --> <div class="absolute inset-2 rounded-full opacity-20" style="background: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(139, 69, 19, 0.3) 2px, rgba(139, 69, 19, 0.3) 4px);" data-astro-cid-nw2kwzey></div> </div> <!-- Spinning wheel with segments --> <div id="wheel" class="absolute inset-4 rounded-full overflow-hidden transition-transform duration-[5000ms] ease-out" style="background: conic-gradient(from 0deg, #8B4513, #A0522D, #8B4513, #A0522D, #8B4513, #A0522D, #8B4513, #A0522D);" data-astro-cid-nw2kwzey> <div id="wheelContent" class="w-full h-full relative" data-astro-cid-nw2kwzey> <!-- Player names will be inserted here by JS --> </div> </div> <!-- Center button --> <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10" data-astro-cid-nw2kwzey> <button id="spinBtn" class="w-20 h-20 rounded-full bg-gradient-to-br from-aoe-gold via-amber-500 to-amber-700 shadow-lg border-4 border-amber-800 hover:from-aoe-gold-light hover:to-amber-600 transition-all font-cinzel text-amber-950 font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed" disabled data-astro-cid-nw2kwzey>
GIRAR
</button> </div> <!-- Metal rivets --> <div class="absolute inset-0" data-astro-cid-nw2kwzey> ${[0, 45, 90, 135, 180, 225, 270, 315].map((angle) => renderTemplate`<div class="absolute w-3 h-3 rounded-full bg-gradient-to-br from-gray-300 to-gray-600 border border-gray-700"${addAttribute(`top: 50%; left: 50%; transform: rotate(${angle}deg) translateY(-155px) translate(-50%, -50%);`, "style")} data-astro-cid-nw2kwzey></div>`)} </div> </div> <!-- Instruction message (below wheel) --> <div id="instructionMsg" class="mt-6 text-center" data-astro-cid-nw2kwzey> <p class="text-aoe-cream-dark font-cinzel" data-astro-cid-nw2kwzey>Selecciona al menos 2 jugadores para girar</p> </div> <!-- Result Display --> <div id="resultDisplay" class="mt-8 text-center hidden" data-astro-cid-nw2kwzey> <div class="aoe-card p-6 bg-aoe-dark/80 border-aoe-gold" data-astro-cid-nw2kwzey> <h3 class="aoe-title text-xl mb-4 text-aoe-gold" data-astro-cid-nw2kwzey>Enfrentamiento</h3> <div class="flex items-center justify-center gap-6" data-astro-cid-nw2kwzey> <div class="text-center" data-astro-cid-nw2kwzey> <div id="player1Name" class="text-2xl font-cinzel text-green-400" data-astro-cid-nw2kwzey></div> </div> <div class="text-aoe-gold text-3xl font-cinzel" data-astro-cid-nw2kwzey>VS</div> <div class="text-center" data-astro-cid-nw2kwzey> <div id="player2Name" class="text-2xl font-cinzel text-red-400" data-astro-cid-nw2kwzey></div> </div> </div> </div> </div> </div> </div> <!-- Match History from Wheel --> <div class="aoe-panel" data-astro-cid-nw2kwzey> <h2 class="aoe-title text-xl mb-4" data-astro-cid-nw2kwzey>Enfrentamientos Generados</h2> <div id="matchHistory" class="space-y-2" data-astro-cid-nw2kwzey> <p class="text-aoe-cream-dark text-center py-4" data-astro-cid-nw2kwzey>
Los enfrentamientos generados aparecerán aquí
</p> </div> <div class="flex gap-4 mt-4" data-astro-cid-nw2kwzey> <button id="clearHistoryBtn" class="aoe-btn flex-1" disabled data-astro-cid-nw2kwzey>
Limpiar Historial
</button> <button id="spinAgainBtn" class="aoe-btn-primary flex-1" disabled data-astro-cid-nw2kwzey>
Girar de Nuevo
</button> </div> </div> </div>`} </div> ` }), defineScriptVars({ players }));
}, "C:/Users/tronc/OneDrive/Escritorio/proyects/proyect-two/age-boys/src/pages/ruleta.astro", void 0);

const $$file = "C:/Users/tronc/OneDrive/Escritorio/proyects/proyect-two/age-boys/src/pages/ruleta.astro";
const $$url = "/ruleta";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Ruleta,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
